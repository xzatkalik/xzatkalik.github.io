<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><link type="text/css" rel="stylesheet" href="style1.css" media="screen" /><title>Tiny PXE Server</title></head><body><font> 
 
 
 
<p> 
<select ONCHANGE="location = this.options[this.selectedIndex].value;"> 
<option value="" disabled></option> 
<option value="../index.html">Contents</option> 
<option value="" disabled>=======</option> 
<option value="pxesrv_about.htm">Introduction</option> 
<option value="pxesrv_settings.htm">Settings</option> 
<option value="pxesrv_gui.htm">GUI Settings</option> 
<option value="pxesrv_config.htm">Config.ini settings</option> 
<option value="pxesrv_service.htm">Run as Service</option> 
<option value="firewall.htm">Firewall Settings</option> 
<option value="test_system.htm">Test System(s)</option> 
<option value="misc.htm">Miscellaneous</option> 
<option value="troubleshooting.htm">Troubleshooting</option> 
<option value="" disabled></option> 
<option value="" disabled>Boot Loaders</option> 
<option value="" disabled>==========</option> 
<option value="pxelinux.htm">PXELINUX</option> 
<option value="grub4dos.htm">Grub4Dos</option> 
<option value="ipxe.htm">iPXE</option> 
<option value="" disabled></option> 
<option value="" disabled>Boot</option> 
<option value="" disabled>====</option> 
<option value="fdd.htm">Floppy Disk Image</option> 
<option value="iso.htm">ISO Image</option> 
<option value="" disabled></option> 
<option value="" disabled>Linux</option> 
<option value="" disabled>=====</option> 
<option value="centos_netinstall.htm">CentOS - Network...</option> 
<option value="debian_netinstall.htm">Debian - Network...</option> 
<option value="fatdog.htm">FatDog</option> 
<option value="gparted.htm" selected="selected">GPartEd</option> 
<option value="ubuntu.htm">ubuntu/Lubuntu</option> 
<option value="ubuntu_netinstall.htm">ubuntu - Network...</option> 
<option value="" disabled></option> 
<option value="" disabled>WinPE</option> 
<option value="" disabled>=====</option> 
<option value="winpe.htm">WinPE</option> 
<option value="winpe_wimboot.htm">WinPE (wimboot)</option> 
<option value="winpe_bcd.htm">Multiple WinPE</option> 
<option value="" disabled></option> 
<option value="" disabled>Net Install Windows</option> 
<option value="" disabled>===============</option> 
<option value="ris.htm">RIS</option> 
<option value="ris_issues.htm">Troubleshooting RIS</option> 
<option value="win6x.htm">Install Windows NT 6.*</option> 
<option value="win5x.htm">Install Windows NT 5.*</option> 
<option value="" disabled></option> 
<option value="" disabled>SANBOOT (AoE)</option> 
<option value="" disabled>================</option> 
<option value="aoe_target.htm">AoE (Windows T...</option> 
<option value="aoe_install_winnt5.htm">AoE (Install Driver...</option> 
<option value="aoe_install_winnt6.htm">AoE (Install Driver...</option> 
<option value="aoe.htm">AoE (Clone...</option> 
<option value="" disabled></option> 
<option value="" disabled>SANBOOT (iSCSI)</option> 
<option value="" disabled>================</option> 
<option value="iscsi_targets.htm">iSCSI (Windows T...</option> 
<option value="iscsi_kernsafe.htm">iSCSI (Kernsafe...</option> 
<option value="iscsi_ms.htm">iSCSI (Microsoft...</option> 
<option value="iscsi_pytarget.htm">iSCSI (pyTarget)</option> 
<option value="iscsi.htm">iSCSI (Clone...</option> 
<option value="iscsi_install.htm">iSCSI (Install...</option> 
<option value="iscsi_centos.htm">iSCSI ...CentOS</option> 
<option value="iscsi_ubuntu.htm">iSCSI ...ubuntu</option> 
<option value="iscsi_ubuntu_netinstall.htm">iSCSI ...ubuntu (2)</option> 
<option value="" disabled></option> 
<option value="" disabled>Miscellaneous</option> 
<option value="" disabled>===========</option> 
<option value="clone.htm">Capture Windows...</option> 
<option value="clone_strarc.htm">Copy Windows...</option> 
<option value="service.htm">Network Adapter C...</option> 
<option value="wfplwf.htm">Unbinding The Light...</option> 
<option value="forensics.htm">Digital Forensic Acq...</option> 
<option value="ipxe_build.htm">iPXE - How to...</option> 
<option value="" disabled></option> 
<option value="" disabled>Appendices</option> 
<option value="" disabled>=========</option> 
<option value="pxesrv_zip.htm">Contents of pxesrv.zip</option> 
<option value="pxesrv_faq.htm">Erwan's FAQ</option> 
<option value="ack.htm">Acknowledgements...</option> 
<option value="" disabled></option> 
</select> 
</p> 
 
 
 
<hr> 
<img src="img/logo6.jpg" BORDER=1></a> 
 



<h2 align="center"><u>GParted</u></h2>


<p>
Gnome Partition Editor (GParted) is 

<div id="quote"><a class="glossary" href="http://gparted.org/">"...a free partition editor for graphically managing your disk partitions...
With GParted you can resize, copy, and move partitions without data loss, enabling you to...Create space for new operating system... 
Attempt data rescue from lost partitions..."</a></div>
</p>

<p>
The following sections are covered in this page 
<ul>
<li><a class="glossary" href="gparted.htm#files">Required Files</a></li>
<li><a class="glossary" href="gparted.htm#pxelinux">pxelinux settings</a></li>
<li><a class="glossary" href="gparted.htm#grub4dos">grub4dos settings</a></li>
<li><a class="glossary" href="gparted.htm#ipxe">iPXE settings</a></li>
<li><a class="glossary" href="gparted.htm#ipxe_scripts">iPXE Scripts</a></li>
</ul>
</p>



<p>
GParted version 0.22.0-2 was used during testing - similar settings may also work with other versions.
</p>












<a name="files"></a>
<h3 class="breaktop"><u>Required Files</u></h3>



<p>
To PXE Boot GParted, download the ISO file (<a class="glossary" target="_blank" href="http://gparted.org/download.php">http://gparted.org/download.php</a>). 
</p>



<p>
Now create the folder <font class="file">\gparted0220\</font> in your <font class="file">Tiny PXE Server</font> root directory - e.g. <font class="file">C:\pxesrv\files\gparted0220\</font>.
</p>



<p>
Now extract the following files from the GParted ISO (mount it in ImDisk, or extract using 7-zip, or use a tool of your choice) and copy them to <font class="file">C:\pxesrv\files\gparted0220\</font> -
<ul>
<li><font class="file">\filesystem.squashfs</font></li>
<li><font class="file">\initrd.img</font></li>
<li><font class="file">\vmlinuz</font></li>
</ul>
</p>



<p>
<font class="file">Tiny PXE Server</font> directory structure -
<ul>
<li><font class="file">C:\pxesrv\files\gparted0220\filesystem.squashfs</font></li>
<li><font class="file">C:\pxesrv\files\gparted0220\initrd.img</font></li>
<li><font class="file">C:\pxesrv\files\gparted0220\vmlinuz</font></li>
</ul>
</p>

<p>
Now add a menu entry for your preferred Network Bootstrap Program -
<ul>
<li><a class="glossary" href="gparted.htm#pxelinux">pxelinux settings</a></li>
<li><a class="glossary" href="gparted.htm#grub4dos">grub4dos settings</a></li>
<li><a class="glossary" href="gparted.htm#ipxe">iPXE settings</a></li>
<li><a class="glossary" href="gparted.htm#ipxe_scripts">iPXE Scripts</a></li>
</ul>
</p>











<a name="pxelinux"></a>
<h3 class="breaktop"><u>pxelinux settings</u></h3>


<p>
Remember to ensure that the required files are copied to your <font class="file">Tiny PXE Server</font> root directory - 
<ul>
<li><font class="file">C:\pxesrv\files\pxelinux.0</font></li>
<li><font class="file">C:\pxesrv\files\menu.c32</font></li> 
<li><font class="file">C:\pxesrv\files\pxelinux.cfg\default</font></li>
</ul>
</p>


<p>
Add the following to <font class="file">C:\pxesrv\files\pxelinux.cfg\default</font> (create this file if required) -
<br />
<textarea style="font-size:12px" cols="80" rows="10" align="left" wrap="OFF" readonly>

label GParted (Version 0.22.0)
MENU LABEL GParted Live
kernel gparted0220/vmlinuz
append initrd=gparted0220/initrd.img boot=live config components union=overlay username=user noswap noeject ip= vga=788 fetch=http://192.168.2.1/gparted0220/filesystem.squashfs

</textarea>
</p>

<p>
The parameter containing the path to <font class="file">filesystem.squashfs</font> may need to be edited to suit your own setup - replacing the IP (v4) address with the IP address of your server. 
</p>


<p>
Click on one of the following for sample <font class="file">config.ini</font> settings (edit to reflect your own setup) -
<ul>
<li><b>DHCP</b> - <a href="txt/config_dhcp_pxelinux1.txt">here</a></li>
<li><b>Proxy DHCP</b> - <a href="txt/config_proxydhcp_pxelinux1.txt">here</a></li>
</ul>
</p>







<a name="grub4dos"></a>
<h3 class="breaktop"><u>grub4dos settings</u></h3>


<p>
Remember to ensure that the required files are copied to your <font class="file">Tiny PXE Server</font> root directory - 
<ul>
<li><font class="file">C:\pxesrv\files\grldr</font></li>
<li><font class="file">C:\pxesrv\files\menu.lst\default</font></li>
</ul>
</p>


<p>
Add the following to <font class="file">C:\pxesrv\files\menu.lst\default</font> (create this file if required) -
<br />
<textarea style="font-size:12px" cols="80" rows="10" align=left wrap=off readonly>

title GParted (Version 0.22.0)
kernel (pd)/gparted0220/vmlinuz boot=live config components union=overlay username=user noswap noeject ip= vga=788 fetch=http://192.168.2.1/gparted0220/filesystem.squashfs
initrd (pd)/gparted0220/initrd.img

</textarea>
</p>



<p>
The parameter containing the path to <font class="file">filesystem.squashfs</font> may need to be edited to suit your own setup - replacing the IP (v4) address with the IP address of your server. 
</p>



<p>
Click on one of the following for <font class="file">config.ini</font> settings (edit to reflect your own setup) -
<ul>
<li><b>DHCP</b> - <a href="txt/config_dhcp_grldr1.txt">here</a></li>
<li><b>Proxy DHCP</b> - <a href="txt/config_proxydhcp_grldr1.txt">here</a></li>
</ul>
</p>


















<a name="ipxe"></a>
<h3 class="breaktop"><u>iPXE settings</u></h3>



<p>
Remember to ensure that the required files are copied to your <font class="file">Tiny PXE Server</font> root directory - 
<ul>
<li><font class="file">C:\pxesrv\files\ipxe.pxe</font> (or <font class="file">C:\pxesrv\files\ipxe-undionly.kpxe</font>)</li>
<li><font class="file">C:\pxesrv\files\ipxe_menu.txt</font></li> 
</ul>
</p>


<p>
Add the following to the menu section of <font class="file">C:\pxesrv\files\ipxe_menu.txt</font> (create this file if required) -
<br />
<textarea style="font-size:12px" cols="80" rows="10" align=left wrap=off readonly>

item gparted       GParted (Version 0.22.0)

</textarea>
</p>



<p>
Add the following to the menu options section of <font class="file">C:\pxesrv\files\ipxe_menu.txt</font> -
<br />
<textarea style="font-size:12px" cols="80" rows="10" align=left wrap=off readonly>

:gparted
kernel ${boot-url}/gparted0220/vmlinuz boot=live config components union=overlay username=user noswap noeject ip= vga=788 fetch=${boot-url}/gparted0220/filesystem.squashfs
initrd ${boot-url}/gparted0220/initrd.img
boot

</textarea>
</p>



<p>
E.g. - 
<br />
<textarea style="font-size:12px" cols="80" rows="10" align=left wrap=off readonly>
#!ipxe
#============== Set Variables ===============
set boot-url http://${dhcp-server}

#================ Main Menu =================
menu iPXE boot menu
item gparted       GParted (Version 0.22.0)
choose target && goto ${target}

#============ Main Menu Options =============
:gparted
kernel ${boot-url}/gparted0220/vmlinuz boot=live config components union=overlay username=user noswap noeject ip= vga=788 fetch=${boot-url}/gparted0220/filesystem.squashfs
initrd ${boot-url}/gparted0220/initrd.img
boot

</textarea>
<br />
<b>NOTE</b> - remember to change <font class="file">set boot-url http://${dhcp-server}</font> if using ProxyDHCP.
</p>




<p>
Click on one of the following for <font class="file">config.ini</font> settings (edit to reflect your own setup) -
<ul>
<li><b>DHCP</b> - <a href="txt/config_dhcp_ipxe1.txt">here</a></li>
<li><b>Proxy DHCP</b> - <a href="txt/config_proxydhcp_ipxe1.txt">here</a></li>
</ul>
</p>









<a name="ipxe_scripts"></a>
<h3 class="breaktop"><u>iPXE Scripts</u></h3>


<p>
<font class="file">iPXE</font> menus are essentially complicated scripts. It's also possible to specify a script using the <a class="glossary" href="pxesrv_config.htm#altfilename">altfilename</a> option in <font class="file">config.ini</font>. <b>NOTE</b> - remember to change <font class="file">set boot-url http://${dhcp-server}</font> if using ProxyDHCP.
</p>



<p>
Sample <font class="file">iPXE</font> script - <br />
<textarea style="font-size:12px" cols="80" rows="10" align=left wrap=off readonly>

#!ipxe
set boot-url http://${dhcp-server}
kernel ${boot-url}/gparted0220/vmlinuz boot=live config components union=overlay username=user noswap noeject ip= vga=788 fetch=${boot-url}/gparted0220/filesystem.squashfs
initrd ${boot-url}/gparted0220/initrd.img
boot
</textarea>
</p>






<p class="breakbottom">
</p>






<p class="breaktop"><font class="file">Document date - 28<sup>th</sup> February 2017(DRAFT)</font></p></font></body></html>