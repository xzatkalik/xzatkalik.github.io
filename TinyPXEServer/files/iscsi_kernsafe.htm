<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><link type="text/css" rel="stylesheet" href="style1.css" media="screen" /><title>Tiny PXE Server</title></head><body><font> 
 
 
 
<p> 
<select ONCHANGE="location = this.options[this.selectedIndex].value;"> 
<option value="" disabled></option> 
<option value="../index.html">Contents</option> 
<option value="" disabled>=======</option> 
<option value="pxesrv_about.htm">Introduction</option> 
<option value="pxesrv_settings.htm">Settings</option> 
<option value="pxesrv_gui.htm">GUI Settings</option> 
<option value="pxesrv_config.htm">Config.ini settings</option> 
<option value="pxesrv_service.htm">Run as Service</option> 
<option value="firewall.htm">Firewall Settings</option> 
<option value="test_system.htm">Test System(s)</option> 
<option value="misc.htm">Miscellaneous</option> 
<option value="troubleshooting.htm">Troubleshooting</option> 
<option value="" disabled></option> 
<option value="" disabled>Boot Loaders</option> 
<option value="" disabled>==========</option> 
<option value="pxelinux.htm">PXELINUX</option> 
<option value="grub4dos.htm">Grub4Dos</option> 
<option value="ipxe.htm">iPXE</option> 
<option value="" disabled></option> 
<option value="" disabled>Boot</option> 
<option value="" disabled>====</option> 
<option value="fdd.htm">Floppy Disk Image</option> 
<option value="iso.htm">ISO Image</option> 
<option value="" disabled></option> 
<option value="" disabled>Linux</option> 
<option value="" disabled>=====</option> 
<option value="centos_netinstall.htm">CentOS - Network...</option> 
<option value="debian_netinstall.htm">Debian - Network...</option> 
<option value="fatdog.htm">FatDog</option> 
<option value="gparted.htm">GPartEd</option> 
<option value="ubuntu.htm">ubuntu/Lubuntu</option> 
<option value="ubuntu_netinstall.htm">ubuntu - Network...</option> 
<option value="" disabled></option> 
<option value="" disabled>WinPE</option> 
<option value="" disabled>=====</option> 
<option value="winpe.htm">WinPE</option> 
<option value="winpe_wimboot.htm">WinPE (wimboot)</option> 
<option value="winpe_bcd.htm">Multiple WinPE</option> 
<option value="" disabled></option> 
<option value="" disabled>Net Install Windows</option> 
<option value="" disabled>===============</option> 
<option value="ris.htm">RIS</option> 
<option value="ris_issues.htm">Troubleshooting RIS</option> 
<option value="win6x.htm">Install Windows NT 6.*</option> 
<option value="win5x.htm">Install Windows NT 5.*</option> 
<option value="" disabled></option> 
<option value="" disabled>SANBOOT (AoE)</option> 
<option value="" disabled>================</option> 
<option value="aoe_target.htm">AoE (Windows T...</option> 
<option value="aoe_install_winnt5.htm">AoE (Install Driver...</option> 
<option value="aoe_install_winnt6.htm">AoE (Install Driver...</option> 
<option value="aoe.htm">AoE (Clone...</option> 
<option value="" disabled></option> 
<option value="" disabled>SANBOOT (iSCSI)</option> 
<option value="" disabled>================</option> 
<option value="iscsi_targets.htm">iSCSI (Windows T...</option> 
<option value="iscsi_kernsafe.htm" selected="selected">iSCSI (Kernsafe...</option> 
<option value="iscsi_ms.htm">iSCSI (Microsoft...</option> 
<option value="iscsi_pytarget.htm">iSCSI (pyTarget)</option> 
<option value="iscsi.htm">iSCSI (Clone...</option> 
<option value="iscsi_install.htm">iSCSI (Install...</option> 
<option value="iscsi_centos.htm">iSCSI ...CentOS</option> 
<option value="iscsi_ubuntu.htm">iSCSI ...ubuntu</option> 
<option value="iscsi_ubuntu_netinstall.htm">iSCSI ...ubuntu (2)</option> 
<option value="" disabled></option> 
<option value="" disabled>Miscellaneous</option> 
<option value="" disabled>===========</option> 
<option value="clone.htm">Capture Windows...</option> 
<option value="clone_strarc.htm">Copy Windows...</option> 
<option value="service.htm">Network Adapter C...</option> 
<option value="wfplwf.htm">Unbinding The Light...</option> 
<option value="forensics.htm">Digital Forensic Acq...</option> 
<option value="ipxe_build.htm">iPXE - How to...</option> 
<option value="" disabled></option> 
<option value="" disabled>Appendices</option> 
<option value="" disabled>=========</option> 
<option value="pxesrv_zip.htm">Contents of pxesrv.zip</option> 
<option value="pxesrv_faq.htm">Erwan's FAQ</option> 
<option value="ack.htm">Acknowledgements...</option> 
<option value="" disabled></option> 
</select> 
</p> 
 
 
 
<hr> 
<img src="img/logo6.jpg" BORDER=1></a> 
 



<h2 align="center"><u>iSCSI (Kernsafe iStorage Server)</u></h2>



<p>
This page contains the following sections -
<ul>
<li><a class="glossary" href="iscsi_kernsafe.htm#install">Installing iStorage Server</a></li>
<li><a class="glossary" href="iscsi_kernsafe.htm#config">Configuring iStorage Server</a></li>
<li><a class="glossary" href="iscsi_kernsafe.htm#error">Could not open SAN device: Error</a></li>
</ul>
</p>




<p>
<b><u><font color="red">NOTE</font></u></b> - the screenshots below were captured from iStorage Server version 4.35. Version 5.20 is the most recent release at the time of writing - there do not appear to have been any significant changes in the process.
</p>









<a name="install"></a>
<h3 class="breaktop"><u>Installing iStorage Server</u></h3>



<p>
Install using default settings - 
</p>


<p>
<img src="img/installer1.jpg" border=1>
</p>



<p class="breaktop">
<img src="img/installer2.jpg" border=1>
</p>




<p class="breaktop">
<img src="img/installer3.jpg" border=1>
</p>




<p class="breaktop">
<img src="img/installer4.jpg" border=1>
</p>




<p class="breaktop">
<img src="img/installer5.jpg" border=1>
</p>





<p class="breaktop">
<img src="img/installer6.jpg" border=1>
</p>




<p class="breaktop">
<img src="img/installer7.jpg" border=1>
</p>












<a name="config"></a>
<h3 class="breaktop"><u>Configuring iStorage Server</u></h3>


<p>
The process for creating a Simple <font class="file">Target</font> using a dynamic (aka Sparse, expandable) type VHD is detailed below - 
</p>

<ul>
<li><font class="file"></font></li>
<li><font class="file"></font></li>
<li><font class="file"></font></li>
</ul>




<font class="file"></font>





<div class="breaktop">
<font class="file">Storage</font> &gt; <font class="file">Create Target</font> (or press <font class="file">Ctrl</font>+<font class="file">N</font>) - 
<br />
<a href="img/console2.jpg"><IMG SRC="img/console2.jpg" float=left width=70% margin-right=1% margin-bottom=0.5em border=1></a>
</div>





<p class="breaktop">
Select <font class="file">Hard Disk</font> &gt; <font class="file"><u>N</u>ext &gt;</font> - 
<br />
<img src="img/target1.jpg" border=1>
</p>






<p class="breaktop">
Select <font class="file">Image File</font> &gt; <font class="file"><u>N</u>ext &gt;</font> - 
<br />
<img src="img/target2.jpg" border=1>
</p>






<p class="breaktop">
Select <font class="file">Virtual Hard Disk (VHD)</font> &gt; <font class="file"><u>N</u>ext &gt;</font> - 
<br />
<img src="img/target3.jpg" border=1>
</p>






<p class="breaktop">
Select <font class="file">Create a new image file</font> &gt; enter filename and path (e.g. <font class="file">iSCSI_target1.vhd</font>) &gt; set the required size &gt; select <font class="file">Dynamically expanding</font>


<font class="file"><u>N</u>ext &gt;</font> - 
<br />
<img src="img/target4.jpg" border=1>
</p>






<p class="breaktop">
Select <font class="file">Anonymous</font> &gt; <font class="file"><u>N</u>ext &gt;</font> - 
<br />
<img src="img/target5.jpg" border=1>
</p>






<p class="breaktop">
Set a <font class="file">Target Name:</font> &gt; <font class="file">Finish</font> - 
<br />
<img src="img/target6.jpg" border=1>
</p>







<div class="breaktop">
The device should now be displayed in the console window -
<br >
<a href="img/console3.jpg"><IMG SRC="img/console3.jpg" float=left width=70% margin-right=1% margin-bottom=0.5em border=1></a>
</div>







<a name="error"></a>
<h3 class="breaktop"><u>Could not open SAN device: Error</u></h3>


<p>
If you receive the following error when attempting to run the <font class="file">SANBOOT</font> or <font class="file">SANHOOK</font> commands in iPXE...
<ul>
<li><font class="file">Could not open SAN device: Connection reset (http://ipxe.org/0f0a6039)</font></li>
</ul>
... try to <font class="file">Stop</font> and <font class="file">(Re)start</font> the service. 
</p>


<p>
Consider disabling the service at start-up (<font class="file">tools</font> &gt; <font class="file">Service Settings...</font> &gt; <font class="file">iSCSI Service</font> (tab) &gt; disable <font class="file">"Auto start iSCSI service after windows startup"</font>) and manually starting as required. 
</p>



<p class="breaktop"><font class="file">Document date - 28<sup>th</sup> February 2017(DRAFT)</font></p></font></body></html>
